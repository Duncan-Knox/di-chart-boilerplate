(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(25)},12:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);n(12);var a=n(8),r=n(2),o=function(){function e(){this.id=Math.random(),this.state={},this.listeners=[],Object(r.d)(this,{state:r.e,setState:r.a,getState:r.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(r.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(a.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new o;var i=n(0),c=n.n(i),u=n(1),d=function(e){return c.a.createElement("div",{className:"table-styled"},c.a.createElement("table",null,e.children))},l=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return c.a.createElement("tr",{key:n},e.map((function(e,n){return t?c.a.createElement("th",{key:n},e):c.a.createElement("td",{key:n},e)})))}))};return c.a.createElement(d,null,c.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),c.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},s=["Reproductive health care","Family planning"],f=[2010,2019],p=n(9);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var w=function(e){return Number(e.toFixed(2))},v=function(e){return new Promise((function(t){Object(p.parse)(e,{download:!0,header:!0,complete:function(e){var n=e.data;return t(n)}})}))},b=function(e,t,n){return e.filter((function(e){return e[n]===t}))},g=function(e,t,n){return e.filter((function(e){return t.includes(e[n])}))},y=function(e){for(var t,n=e[1]-e[0]+1,a=[],r=h(Array(n).keys());!(t=r()).done;){var o=t.value;a.push(o)}return a.map((function(t){return e[0]+t}))},S=function(e,t,n){return t.reduce((function(t,a){var r=e.filter((function(e){return e.year===""+a})).reduce((function(e,t){return w(e+w(Number(t[n])||0))}),0);return t.concat(r)}),[])},E=v,I=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();window.DIState?window.DIState.addListener((function(){t.showLoading();var n=window.DIState.getState,a=n.country,r=n.dataOne;if(a&&r){var o=g(b(r,a||"United States","donor_name"),s,"purpose_name");!function(e,t,n){var a=y(f),r=["Purpose code"].concat(a),o=s.map((function(e){var n=g(t,[e],"purpose_name");return[e].concat(S(n,a,"usd_disbursement_deflated"))})),c=r.map((function(e,t){return 0===t?"Total":w(o.reduce((function(e,n){return e+n[t]}),0))})),d=[r].concat(o,[c]);Object(u.render)(Object(i.createElement)(l,{country:n,rows:d}),e)}(e,o,a||"United States"),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},D=function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,["spotlight-banner","data-selector--wrapper"]),e.parentElement.insertBefore(n,e),n},L=function(e,t){var n=document.createElement("option");n.value="string"==typeof t?t:t.value,n.text="string"==typeof t?t:t.label,e.appendChild(n)},_=function(e){var t,n=e.wrapper,a=e.options,r=e.defaultOption,o=e.allItemsLabel,i=e.className,c=e.label,u=document.createElement("select");if((t=u.classList).add.apply(t,["data-selector","js-plotly-chart-data-selector",i]),o&&L(u,{label:o,value:"*"}),a.forEach((function(e){return L(u,e)})),u.classList.add("data-selector--active"),r&&(u.value=r),c){var d=document.createElement("label");d.innerHTML=c;var l=document.createElement("div");l.classList.add("labelled-data-selector--wrapper"),l.appendChild(d),l.appendChild(u),n.appendChild(l)}else n.appendChild(u);return u},C=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();E("https://raw.githubusercontent.com/devinit/di-website-data/main/2022/rh-and-fp-dropdowns.csv").then((function(n){var a=D(e),r=_({wrapper:a,options:n.map((function(e){return e.Donors})),defaultOption:"United States",className:"country-filter",label:"Select Donor"});window.DIState&&window.DIState.setState({country:"United States"}),r.addEventListener("change",(function(e){var t=e.currentTarget.value;window.DIState&&window.DIState.setState({country:t})})),t.hideLoading(),e.parentElement.classList.add("auto-height")}))}))}}})},A=n(4),O=n.n(A),x={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0a3a64","#00538e","#1060a3","#4397d3","#77adde","#a3c7eb","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"]},j={legend:{top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{trigger:"axis",textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},toolbox:{showTitle:!1,feature:{saveAsImage:{title:"Save as image",pixelRatio:2}},right:20,tooltip:{show:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif",formatter:function(e){return"<div>"+e.title+"</div>"}}}},color:x.default,xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},grid:{top:10}},N=function(e,t,n){var a=Object(r.f)(e),o=g(a,[t],"purpose_name");return S(o,n,"usd_disbursement_deflated")},k=function(e,t){return s.map((function(n){return{name:n,type:"bar",stack:"oda",data:N(e,n,t)}})).map((function(e,t,n){return t===n.length-1?Object.assign({},e,{label:{normal:{show:!0,position:"top",formatter:function(e){var t=n.reduce((function(t,n){var a=n.data[e.dataIndex];return t+parseFloat(a||0)}),0);return w(t)},color:"#000000"}}}):e}))},P=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading(),window.DIState?window.DIState.addListener((function(){t.showLoading();var n=window.DIState.getState,a=n.country,r=n.dataOne;if(a&&r){var o=g(b(r,a||"United States","donor_name"),s,"purpose_name");!function(e,t){var n=window.echarts.init(e),a=y(f),r={legend:{show:!0,selectedMode:!1},xAxis:{type:"category",data:a},yAxis:{type:"value",name:"USD$ millions (constant 2019 prices)",nameLocation:"middle",nameGap:50},grid:{top:60},series:k(t,a)};n.setOption(O()(j,r))}(e,o),t.hideLoading()}})):(console.log("State is not defined"),t.hideLoading())}))}}})},F=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(n,a){return c.a.createElement("tr",{key:a},n.map((function(n,r){return t?c.a.createElement("th",{key:r},n):a===e.length-1&&0===r?c.a.createElement("td",{colSpan:2,key:r},n):c.a.createElement("td",{key:r},n)})))}))};return c.a.createElement(d,null,c.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),c.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))};function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var R=function(e,t,n,a){for(var r,o=[2016,2019],c=[],d=T(Array(o[1]-o[0]+1).keys());!(r=d()).done;){var l=r.value;c.push(l)}var s=["Rank","Recipient"].concat(c.map((function(e){return o[0]+e}))),f=e.filter((function(e){return n===e["Code type"]})),p=function(e){for(var t=[].concat(e),n=[],a=0;a<10;a++)if(t.length>=1){var r=t.reduce((function(e,t){return Number(e[2019])<Number(t[2019])?t:e}));n.push(r);var o=t.indexOf(r);t.splice(o,1)}return{sortedData:n,unsortedData:t}}(b(f,t,"donor_name")),h=p.sortedData,m=function(e,t){var n=[];return t.forEach((function(t){var a=e.map((function(e){return Number(e[t])})).reduce((function(e,t){return e+t}),0);n.push(w(a))})),n}(p.unsortedData,c.map((function(e){return(o[0]+e).toString()}))),v=[s].concat(function(e){for(var t=[],n=0;n<10;n++)e.length>=1&&t.push([n+1,e[n].recipient_name,w(Number(e[n][2016])),w(Number(e[n][2017])),w(Number(e[n][2018])),w(Number(e[n][2019]))]);return t}(h)).concat([["Total of all other recipients"].concat(m)]);Object(u.render)(Object(i.createElement)(F,{rows:v}),a)},G=function(e){window.DICharts.handler.addChart({className:e,echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=D(e),r="Reproductive health care and family planning";window.DIState?window.DIState.addListener((function(){t.showLoading();var o=window.DIState.getState,i=o.country,c=o.dataTwo;i&&c&&(n||(n=_({wrapper:a,options:c.reduce((function(e,t){var n=t["Code type"];return e.includes(n)?e:e.concat(n)}),[]),defaultOption:r,className:"purpose-code-filter",label:"Select Purpose Code"})).addEventListener("change",(function(t){r=t.target.value,R(c,i,r,e)})),R(c,i,r,e),t.hideLoading())})):(console.log("State is not defined"),t.hideLoading())}))}}})},M=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return c.a.createElement("tr",{key:n},e.map((function(e,n){return t?c.a.createElement("th",{key:n},e):c.a.createElement("td",{key:n},e)})))}))};return c.a.createElement(d,null,c.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),c.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},B=function(e,t,n,a){var r=function(e,t){return e.filter((function(e){return e.purpose_name===t}))}(b(t,n||"United States","donor_name"),a),o=function(e,t){var n=e.reduce((function(e,t){return e.includes(t.aid_type_di_name)||e.push(t.aid_type_di_name),e}),[]),a=t.map((function(e){return e.usd_disbursement_deflated_Sum})).reduce((function(e,t){return e+t})),r=n.map((function(e){var n=t.find((function(t){return t.aid_type_di_name===e})),r=n?n.usd_disbursement_deflated_Sum:0,o=(r/a*100||0).toFixed(1)+"%";return[e].concat(r.toFixed(1),[o])}));return[["Aid Type","2019","% Total"]].concat(r,[["Grand Total",a.toFixed(1),"100%"]])}(t,function(e){return e.filter((function(e){return 2019===e.year}))}(r));Object(u.render)(Object(i.createElement)(M,{country:n,rows:o}),e)},$=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t,n=new window.DICharts.Chart(e.parentElement);n.showLoading(),window.DIState?window.DIState.addListener((function(){n.showLoading();var a=window.DIState.getState,r=a.country,o=a.odaAidType;if(r&&o){var i=function(e){var t=[];return e.forEach((function(e){t.includes(e.purpose_name)||t.push(e.purpose_name)})),t}(o),c=i[0];if(!t){var u=D(e);(t=_({wrapper:u,options:i,defaultOption:c,className:"purpose-code-filter",label:"Select Purpose Code"})).addEventListener("change",(function(t){c=t.target.value,B(e,o,r||"United States",c)}))}B(e,o,r||"United States",c),n.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},z=function(e){var t=function(e,t){return void 0===t&&(t=!1),e.map((function(e,n){return c.a.createElement("tr",{key:n},e.map((function(e,n){return t?c.a.createElement("th",{key:n},e):c.a.createElement("td",{key:n},e)})))}))};return c.a.createElement(d,null,c.a.createElement("thead",null,t(e.rows.filter((function(e,t){return 0===t})),!0)),c.a.createElement("tbody",null,t(e.rows.filter((function(e,t){return t>0})))))},H=function(e,t,n){var a,r,o=(a=function(e){return e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t.oecd_aggregated_channel]=(parseFloat(e[t.oecd_aggregated_channel]||0)+parseFloat(t.usd_disbursement_deflated_Sum||0)).toFixed(1),n))}),{})}(t),r=Object.keys(a).reduce((function(e,t){return w(e+w(Number(a[t])||0))}),0),Object.keys(a).map((function(e){return[e,a[e],((a[e]/r*100||0).toFixed(1)||0)+"%"]})).concat([["All channels",r,"100%"]])),c=[["Channel","2019","% Total"]].concat(o);Object(u.render)(Object(i.createElement)(z,{country:n,rows:c}),e)},J=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a=D(e);window.DIState?window.DIState.addListener((function(){t.showLoading();var r=window.DIState.getState,o=r.country,i=r.odaChannels,c=r.purpose;if(o&&i){var u=function(e){return e.reduce((function(e,t){return e.includes(t.purpose_name)||e.push(t.purpose_name),e}),[])}(i),d=g(b(i,o||"United States","donor_name"),c||u[0],"purpose_name");n||(n=_({wrapper:a,options:u,defaultOption:u[0],className:"purpose-code-filter",label:"Select Purpose Code"}),r&&window.DIState.setState({purpose:u[0]}),n.addEventListener("change",(function(e){window.DIState.setState({purpose:e.target.value})}))),H(e,d,o||"United States"),t.hideLoading(),e.parentElement.classList.add("auto-height")}})):console.log("State is not defined")}))}}})},q=n(10),K=n.n(q),Q=n(5),V=n.n(Q),W=function(e){var t=e.data,n=e.position;return c.a.createElement("div",{className:V()("custom-legend",{right:"right"===n})},t.map((function(e,t){return c.a.createElement("div",{className:V()("legend-item",{label:e.label}),key:""+t},!e.label&&e.colour?c.a.createElement("span",{className:"badge",style:{backgroundColor:e.colour}}):null,c.a.createElement("span",{className:"text"},e.caption))})))};W.defaultProps={data:[]};var X=W,Y=function(e,t,n){void 0===n&&(n="right"),Object(u.render)(Object(i.createElement)(X,{data:t,position:n}),e)},Z=function(e,t,n,a,r){a.push({caption:"Breakdown",label:!0}),a=a.concat(ee(t,n,r)),Y(e,a)},ee=function(e,t,n){return e.children.sort((function(e,t){return e.value-t.value})).reverse().map((function(e){if(e.value){var a=w(e.value/t.value*100),r=K()(n).lighten(.2);return{caption:e.name+" | "+e.value+" - "+a+"%",colour:r.hex()}}return{caption:e.name,colour:"#333"}}))},te=function(e,t,n,a,r){!function(e,t,n){var a=window.echarts.init(e),r=x.rainbow,o=t.map((function(e,t){return{caption:e.name,colour:r[t]}})),i=function(){return Y(n,o)},c={tooltip:{show:!0,trigger:"item",formatter:function(e){if(!e.name)return"Go Back";if(e.treePathInfo.length>1){var t=e.treePathInfo[e.treePathInfo.length-2],n=w(e.value/t.value*100);return e.name+" | "+w(e.value)+" - "+n+"%"}return e.name+" | "+w(e.value)}},xAxis:{show:!1},yAxis:{show:!1},series:{type:"sunburst",emphasis:{focus:"descendant"},sort:void 0,data:t.map((function(e,t){return e.itemStyle={color:r[t]},e})),radius:["20%","100%"],label:{show:!1},levels:[{itemStyle:{color:"#333",opacity:.7},r:120},{r:145},{radius:[150,170]}]},toolbox:{showTitle:!1,feature:{saveAsImage:{show:!1}}}};a.setOption(Object.assign({},O()(j,c),{color:r})),i();var u=0;a.on("click",(function(e){if(e.name){var a=o.filter((function(t){return e.treePathInfo.find((function(e){return e.name===t.caption}))})),r=t.find((function(t){return t.name===e.name}));if(r&&r.children)return u=1,void Z(n,r,e,a,e.color);u=2;var c=e.treePathInfo[e.treePathInfo.length-2],d=t.find((function(e){return e.name===c.name}));d&&d.children?Z(n,d,c,a,a[0].colour):Y(n,a)}else 0===(u-=1)&&i()})),a.on("mouseover",(function(e){if(e.name){var a=o.filter((function(t){return e.treePathInfo.find((function(e){return e.name===t.caption}))}));if(e.treePathInfo.length>1){var r=t.find((function(t){return t.name===e.name}));if(r&&r.children)return void Z(n,r,e,a,e.color);var i=e.treePathInfo[e.treePathInfo.length-2],c=t.find((function(e){return e.name===i.name}));c&&c.children?Z(n,c,i,a,a[0].colour):Y(n,a)}}})),a.on("mouseout",(function(){0===u&&i()}))}(e,function(e,t){return e.map((function(e){return e[t.value]&&(e[t.value]=w(e[t.value])),e})).reduce((function(e,n){return e.includes(n[t.parent])?e:e.concat(n[t.parent])}),[]).map((function(n){return function(e,t,n,a){var r={name:t},o=e.filter((function(e){return e[n.parent]===("string"==typeof t?t:t[n.parent])}));if(o.length)r.children=o.map((function(e){return{name:e[n.child],value:e[n.value]}}));else if("string"==typeof t){var i=e.find((function(e){return e[n.parent]===t}));r.value=i[n.value]}else r.value=t[n.value];return a&&(r.itemStyle={color:a}),r}(e,n,t)}))}(g(b(t,n||"United States","donor_name"),a,"purpose_name"),{parent:"oecd_aggregated_channel",child:"oecd_channel_parent_name",value:"usd_disbursement_deflated_Sum"}),r)},ne=function(e){window.DICharts.handler.addChart({className:e,d3:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement);t.showLoading();var n,a,r=D(e);if(window.DIState){var o=D(e);window.DIState.addListener((function(){var i=window.DIState.getState,c=i.country,u=i.odaChannels;if(c&&u){if(!n){var d=function(e,t){return e.reduce((function(e,n){var a=n[t];return e.includes(a)?e:e.concat(a)}),[])}(u,"purpose_name");a=d[0],(n=_({wrapper:r,options:d,defaultOption:a,className:"purpose-code-filter",label:"Select Purpose Code"})).addEventListener("change",(function(t){a=t.target.value,te(e,u,c,a,o)}))}te(e,u,c,a,o),t.hideLoading(),e.parentElement.classList.add("auto-height")}else t.hideLoading()}))}else console.log("State is not defined")}))}}})};window.addEventListener("load",(function(){window.DIState?(window.DIState.setState({country:"United States"}),v("https://raw.githubusercontent.com/devinit/di-website-data/main/2022/RH-and-FP-CRS-Data-2019.csv").then((function(e){window.DIState.setState({dataOne:e})})),v("https://raw.githubusercontent.com/devinit/di-website-data/main/2022/donor-by-recip-2019.csv").then((function(e){window.DIState.setState({dataTwo:e})})),window.fetch("https://staging-ddw.devinit.org/api/dataset/data/1238/").then((function(e){return e.json()})).then((function(e){window.DIState.setState({odaAidType:e.results||[]})})),window.fetch("https://staging-ddw.devinit.org/api/dataset/data/1237/").then((function(e){return e.json()})).then((function(e){window.DIState.setState({odaChannels:e.results||[]})}))):console.log("State is not defined"),C("dicharts--oda-root"),I("dicharts--table-one-root"),P("dicharts--chart-one-root"),G("dicharts--table-two-root"),$("dicharts--oda-aid-table"),J("dicharts--oda-channels-table"),ne("dicharts--oda-channels-chart")}))}},[[11,1,2]]]);